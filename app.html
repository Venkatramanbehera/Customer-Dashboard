<!DOCTYPE html>
<html>
    <head>
        <title> Customer Dashboard </title>
        <!-- CSS only -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    </head>
    <body>
        <div id="root">

        </div>
        
        <script src="js/react.development.js"></script>
        <script src="js/react-dom.development.js"></script>
        <script src="js/babel.js"></script>
        <script src="js/lodash.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <script type="text/babel">

            const rootHandle = document.getElementById('root')

            const { useState, useEffect } = React 

            const customersData = [
    {
        "Date": "2020-04-29",
        "Phone": 9455622241,
        "Name": "Shankara Narasimhan",
        "Amount": 260
    },
    {
        "Date": "2020-04-29",
        "Phone": 9597628723,
        "Name": "Sulya Gupta",
        "Amount": 90
    },
    {
        "Date": "2020-04-29",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 80
    },
    {
        "Date": "2020-04-29",
        "Phone": 9383568793,
        "Name": "Vaibhav Mulye",
        "Amount": 240
    },
    {
        "Date": "2020-04-29",
        "Phone": 9455622241,
        "Name": "Shankara Narasimhan",
        "Amount": 230
    },
    {
        "Date": "2020-04-29",
        "Phone": 9521737322,
        "Name": "Riddhi Nair",
        "Amount": 70
    },
    {
        "Date": "2020-04-29",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 80
    },
    {
        "Date": "2020-04-29",
        "Phone": 9603660688,
        "Name": "Dhenuka Dhawan",
        "Amount": 250
    },
    {
        "Date": "2020-04-29",
        "Phone": 9451926724,
        "Name": "Sahan Sibal",
        "Amount": 260
    },
    {
        "Date": "2020-04-29",
        "Phone": 9699939066,
        "Name": "Haripriya Nayak",
        "Amount": 270
    },
    {
        "Date": "2020-04-29",
        "Phone": 9590146908,
        "Name": "Sachi Loliyekar",
        "Amount": 110
    },
    {
        "Date": "2020-04-29",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 100
    },
    {
        "Date": "2020-04-29",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 240
    },
    {
        "Date": "2020-04-29",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 70
    },
    {
        "Date": "2020-04-30",
        "Phone": 9969345730,
        "Name": "Kavi Edwin",
        "Amount": 210
    },
    {
        "Date": "2020-04-30",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 280
    },
    {
        "Date": "2020-04-30",
        "Phone": 9971276037,
        "Name": "Pramlocha Comar",
        "Amount": 210
    },
    {
        "Date": "2020-04-30",
        "Phone": 9241664018,
        "Name": "Utathya Ghate",
        "Amount": 260
    },
    {
        "Date": "2020-04-30",
        "Phone": 9248936762,
        "Name": "Arpana Raja",
        "Amount": 260
    },
    {
        "Date": "2020-04-30",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 200
    },
    {
        "Date": "2020-04-30",
        "Phone": 9895408016,
        "Name": "Mukul Krishna",
        "Amount": 180
    },
    {
        "Date": "2020-04-30",
        "Phone": 9241664018,
        "Name": "Utathya Ghate",
        "Amount": 260
    },
    {
        "Date": "2020-04-30",
        "Phone": 9920950009,
        "Name": "Rohan Sarma",
        "Amount": 110
    },
    {
        "Date": "2020-04-30",
        "Phone": 9820224845,
        "Name": "Tanika Philip",
        "Amount": 90
    },
    {
        "Date": "2020-04-30",
        "Phone": 9383568793,
        "Name": "Vaibhav Mulye",
        "Amount": 200
    },
    {
        "Date": "2020-04-30",
        "Phone": 9732082404,
        "Name": "Kali Chaudry",
        "Amount": 290
    },
    {
        "Date": "2020-04-30",
        "Phone": 9534474777,
        "Name": "Daeva Tata",
        "Amount": 70
    },
    {
        "Date": "2020-05-01",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 160
    },
    {
        "Date": "2020-05-01",
        "Phone": 9572464275,
        "Name": "Salmalin Mehta",
        "Amount": 100
    },
    {
        "Date": "2020-05-01",
        "Phone": 9688156631,
        "Name": "Sahan Oak",
        "Amount": 200
    },
    {
        "Date": "2020-05-01",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 250
    },
    {
        "Date": "2020-05-01",
        "Phone": 9979209995,
        "Name": "Atman Mathur",
        "Amount": 140
    },
    {
        "Date": "2020-05-01",
        "Phone": 9521737322,
        "Name": "Riddhi Nair",
        "Amount": 140
    },
    {
        "Date": "2020-05-01",
        "Phone": 9265205814,
        "Name": "Daeva Peri",
        "Amount": 180
    },
    {
        "Date": "2020-05-01",
        "Phone": 9267357082,
        "Name": "Muni Wasgare",
        "Amount": 210
    },
    {
        "Date": "2020-05-01",
        "Phone": 9267357082,
        "Name": "Muni Wasgare",
        "Amount": 290
    },
    {
        "Date": "2020-05-01",
        "Phone": 9590146908,
        "Name": "Sachi Loliyekar",
        "Amount": 190
    },
    {
        "Date": "2020-05-01",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 290
    },
    {
        "Date": "2020-05-01",
        "Phone": 9241664018,
        "Name": "Utathya Ghate",
        "Amount": 180
    },
    {
        "Date": "2020-05-02",
        "Phone": 9971276037,
        "Name": "Pramlocha Comar",
        "Amount": 80
    },
    {
        "Date": "2020-05-02",
        "Phone": 9920950009,
        "Name": "Rohan Sarma",
        "Amount": 140
    },
    {
        "Date": "2020-05-02",
        "Phone": 9705384480,
        "Name": "Latif Chia",
        "Amount": 70
    },
    {
        "Date": "2020-05-02",
        "Phone": 9252350612,
        "Name": "Anushka Mody",
        "Amount": 150
    },
    {
        "Date": "2020-05-02",
        "Phone": 9688156631,
        "Name": "Sahan Oak",
        "Amount": 290
    },
    {
        "Date": "2020-05-02",
        "Phone": 9359394987,
        "Name": "Tarun Mapkar",
        "Amount": 260
    },
    {
        "Date": "2020-05-02",
        "Phone": 9747425720,
        "Name": "Markandeya Barad",
        "Amount": 100
    },
    {
        "Date": "2020-05-02",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 180
    },
    {
        "Date": "2020-05-02",
        "Phone": 9699939066,
        "Name": "Haripriya Nayak",
        "Amount": 110
    },
    {
        "Date": "2020-05-02",
        "Phone": 9590146908,
        "Name": "Sachi Loliyekar",
        "Amount": 220
    },
    {
        "Date": "2020-05-02",
        "Phone": 9820224845,
        "Name": "Tanika Philip",
        "Amount": 220
    },
    {
        "Date": "2020-05-02",
        "Phone": 9747425720,
        "Name": "Markandeya Barad",
        "Amount": 90
    },
    {
        "Date": "2020-05-03",
        "Phone": 9910042819,
        "Name": "Shanti Bajwa",
        "Amount": 100
    },
    {
        "Date": "2020-05-03",
        "Phone": 9518195948,
        "Name": "Indra Chaudry",
        "Amount": 110
    },
    {
        "Date": "2020-05-03",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 80
    },
    {
        "Date": "2020-05-03",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 100
    },
    {
        "Date": "2020-05-03",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 100
    },
    {
        "Date": "2020-05-03",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 120
    },
    {
        "Date": "2020-05-03",
        "Phone": 9453085874,
        "Name": "Manu Oza",
        "Amount": 120
    },
    {
        "Date": "2020-05-03",
        "Phone": 9976945538,
        "Name": "Amitabha Kothari",
        "Amount": 270
    },
    {
        "Date": "2020-05-03",
        "Phone": 9910042819,
        "Name": "Shanti Bajwa",
        "Amount": 280
    },
    {
        "Date": "2020-05-03",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 200
    },
    {
        "Date": "2020-05-03",
        "Phone": 9405883814,
        "Name": "Gauri Som",
        "Amount": 220
    },
    {
        "Date": "2020-05-03",
        "Phone": 9252350612,
        "Name": "Anushka Mody",
        "Amount": 170
    },
    {
        "Date": "2020-05-04",
        "Phone": 9453085874,
        "Name": "Manu Oza",
        "Amount": 120
    },
    {
        "Date": "2020-05-04",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 150
    },
    {
        "Date": "2020-05-04",
        "Phone": 9927277067,
        "Name": "Ranjan Khare",
        "Amount": 80
    },
    {
        "Date": "2020-05-04",
        "Phone": 9910042819,
        "Name": "Shanti Bajwa",
        "Amount": 250
    },
    {
        "Date": "2020-05-04",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 200
    },
    {
        "Date": "2020-05-04",
        "Phone": 9293117791,
        "Name": "Kumara Nayak",
        "Amount": 250
    },
    {
        "Date": "2020-05-04",
        "Phone": 9976945538,
        "Name": "Amitabha Kothari",
        "Amount": 110
    },
    {
        "Date": "2020-05-04",
        "Phone": 9518195948,
        "Name": "Indra Chaudry",
        "Amount": 200
    },
    {
        "Date": "2020-05-04",
        "Phone": 9518195948,
        "Name": "Indra Chaudry",
        "Amount": 130
    },
    {
        "Date": "2020-05-04",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 140
    },
    {
        "Date": "2020-05-04",
        "Phone": 9521737322,
        "Name": "Riddhi Nair",
        "Amount": 120
    },
    {
        "Date": "2020-05-04",
        "Phone": 9920950009,
        "Name": "Rohan Sarma",
        "Amount": 120
    },
    {
        "Date": "2020-05-04",
        "Phone": 9597628723,
        "Name": "Sulya Gupta",
        "Amount": 140
    },
    {
        "Date": "2020-05-04",
        "Phone": 9534474777,
        "Name": "Daeva Tata",
        "Amount": 70
    },
    {
        "Date": "2020-05-04",
        "Phone": 9009381182,
        "Name": "Mira Reddy",
        "Amount": 240
    },
    {
        "Date": "2020-05-04",
        "Phone": 9009381182,
        "Name": "Mira Reddy",
        "Amount": 160
    },
    {
        "Date": "2020-05-04",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 150
    },
    {
        "Date": "2020-05-04",
        "Phone": 9265205814,
        "Name": "Daeva Peri",
        "Amount": 180
    },
    {
        "Date": "2020-05-05",
        "Phone": 9451926724,
        "Name": "Sahan Sibal",
        "Amount": 170
    },
    {
        "Date": "2020-05-05",
        "Phone": 9504662177,
        "Name": "Tara Menon",
        "Amount": 230
    },
    {
        "Date": "2020-05-05",
        "Phone": 9455622241,
        "Name": "Shankara Narasimhan",
        "Amount": 200
    },
    {
        "Date": "2020-05-05",
        "Phone": 9927277067,
        "Name": "Ranjan Khare",
        "Amount": 110
    },
    {
        "Date": "2020-05-05",
        "Phone": 9521737322,
        "Name": "Riddhi Nair",
        "Amount": 90
    },
    {
        "Date": "2020-05-05",
        "Phone": 9252350612,
        "Name": "Anushka Mody",
        "Amount": 120
    },
    {
        "Date": "2020-05-05",
        "Phone": 9699939066,
        "Name": "Haripriya Nayak",
        "Amount": 70
    },
    {
        "Date": "2020-05-05",
        "Phone": 9150159527,
        "Name": "Leya Sankaran",
        "Amount": 270
    },
    {
        "Date": "2020-05-05",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 240
    },
    {
        "Date": "2020-05-05",
        "Phone": 9733555024,
        "Name": "Nirav Khalsa",
        "Amount": 110
    },
    {
        "Date": "2020-05-05",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 200
    },
    {
        "Date": "2020-05-05",
        "Phone": 9241664018,
        "Name": "Utathya Ghate",
        "Amount": 260
    },
    {
        "Date": "2020-05-06",
        "Phone": 9455622241,
        "Name": "Shankara Narasimhan",
        "Amount": 210
    },
    {
        "Date": "2020-05-06",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 250
    },
    {
        "Date": "2020-05-06",
        "Phone": 9705384480,
        "Name": "Latif Chia",
        "Amount": 160
    },
    {
        "Date": "2020-05-06",
        "Phone": 9359394987,
        "Name": "Tarun Mapkar",
        "Amount": 100
    },
    {
        "Date": "2020-05-06",
        "Phone": 9688156631,
        "Name": "Sahan Oak",
        "Amount": 210
    },
    {
        "Date": "2020-05-06",
        "Phone": 9688156631,
        "Name": "Sahan Oak",
        "Amount": 280
    },
    {
        "Date": "2020-05-06",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 110
    },
    {
        "Date": "2020-05-06",
        "Phone": 9699939066,
        "Name": "Haripriya Nayak",
        "Amount": 130
    },
    {
        "Date": "2020-05-06",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 110
    },
    {
        "Date": "2020-05-06",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 90
    },
    {
        "Date": "2020-05-06",
        "Phone": 9597628723,
        "Name": "Sulya Gupta",
        "Amount": 190
    },
    {
        "Date": "2020-05-06",
        "Phone": 9521737322,
        "Name": "Riddhi Nair",
        "Amount": 140
    },
    {
        "Date": "2020-05-06",
        "Phone": 9451926724,
        "Name": "Sahan Sibal",
        "Amount": 230
    },
    {
        "Date": "2020-05-06",
        "Phone": 9403313898,
        "Name": "Adri Dave",
        "Amount": 210
    },
    {
        "Date": "2020-05-06",
        "Phone": 9895408016,
        "Name": "Mukul Krishna",
        "Amount": 240
    },
    {
        "Date": "2020-05-06",
        "Phone": 9504662177,
        "Name": "Tara Menon",
        "Amount": 140
    },
    {
        "Date": "2020-05-07",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 140
    },
    {
        "Date": "2020-05-07",
        "Phone": 9699939066,
        "Name": "Haripriya Nayak",
        "Amount": 280
    },
    {
        "Date": "2020-05-07",
        "Phone": 9732082404,
        "Name": "Kali Chaudry",
        "Amount": 130
    },
    {
        "Date": "2020-05-07",
        "Phone": 9150159527,
        "Name": "Leya Sankaran",
        "Amount": 250
    },
    {
        "Date": "2020-05-07",
        "Phone": 9820224845,
        "Name": "Tanika Philip",
        "Amount": 290
    },
    {
        "Date": "2020-05-07",
        "Phone": 9248936762,
        "Name": "Arpana Raja",
        "Amount": 260
    },
    {
        "Date": "2020-05-07",
        "Phone": 9293117791,
        "Name": "Kumara Nayak",
        "Amount": 200
    },
    {
        "Date": "2020-05-07",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 200
    },
    {
        "Date": "2020-05-07",
        "Phone": 9732082404,
        "Name": "Kali Chaudry",
        "Amount": 280
    },
    {
        "Date": "2020-05-07",
        "Phone": 9265205814,
        "Name": "Daeva Peri",
        "Amount": 70
    },
    {
        "Date": "2020-05-07",
        "Phone": 9534474777,
        "Name": "Daeva Tata",
        "Amount": 160
    },
    {
        "Date": "2020-05-07",
        "Phone": 9252350612,
        "Name": "Anushka Mody",
        "Amount": 80
    },
    {
        "Date": "2020-05-07",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 220
    },
    {
        "Date": "2020-05-07",
        "Phone": 9153022424,
        "Name": "Hastin Mangal",
        "Amount": 180
    },
    {
        "Date": "2020-05-07",
        "Phone": 9920950009,
        "Name": "Rohan Sarma",
        "Amount": 160
    },
    {
        "Date": "2020-05-07",
        "Phone": 9534474777,
        "Name": "Daeva Tata",
        "Amount": 230
    },
    {
        "Date": "2020-05-07",
        "Phone": 9359394987,
        "Name": "Tarun Mapkar",
        "Amount": 260
    },
    {
        "Date": "2020-05-07",
        "Phone": 9969345730,
        "Name": "Kavi Edwin",
        "Amount": 100
    },
    {
        "Date": "2020-05-08",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 130
    },
    {
        "Date": "2020-05-08",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 120
    },
    {
        "Date": "2020-05-08",
        "Phone": 9504662177,
        "Name": "Tara Menon",
        "Amount": 220
    },
    {
        "Date": "2020-05-08",
        "Phone": 9455622241,
        "Name": "Shankara Narasimhan",
        "Amount": 150
    },
    {
        "Date": "2020-05-08",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 90
    },
    {
        "Date": "2020-05-08",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 110
    },
    {
        "Date": "2020-05-08",
        "Phone": 9330107696,
        "Name": "Nipa Naidu",
        "Amount": 70
    },
    {
        "Date": "2020-05-08",
        "Phone": 9927277067,
        "Name": "Ranjan Khare",
        "Amount": 180
    },
    {
        "Date": "2020-05-08",
        "Phone": 9140356318,
        "Name": "Ballari Upadhyay",
        "Amount": 270
    },
    {
        "Date": "2020-05-08",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 70
    },
    {
        "Date": "2020-05-08",
        "Phone": 9518195948,
        "Name": "Indra Chaudry",
        "Amount": 180
    },
    {
        "Date": "2020-05-08",
        "Phone": 9976945538,
        "Name": "Amitabha Kothari",
        "Amount": 270
    },
    {
        "Date": "2020-05-08",
        "Phone": 9534474777,
        "Name": "Daeva Tata",
        "Amount": 210
    },
    {
        "Date": "2020-05-08",
        "Phone": 9504662177,
        "Name": "Tara Menon",
        "Amount": 210
    },
    {
        "Date": "2020-05-08",
        "Phone": 9293117791,
        "Name": "Kumara Nayak",
        "Amount": 200
    },
    {
        "Date": "2020-05-08",
        "Phone": 9293117791,
        "Name": "Kumara Nayak",
        "Amount": 140
    },
    {
        "Date": "2020-05-08",
        "Phone": 9248936762,
        "Name": "Arpana Raja",
        "Amount": 110
    },
    {
        "Date": "2020-05-08",
        "Phone": 9960294002,
        "Name": "Mitra Gounder",
        "Amount": 240
    },
    {
        "Date": "2020-05-08",
        "Phone": 9150159527,
        "Name": "Leya Sankaran",
        "Amount": 140
    },
    {
        "Date": "2020-05-08",
        "Phone": 9236367267,
        "Name": "Takshaka Sandal",
        "Amount": 250
    },
    {
        "Date": "2020-05-09",
        "Phone": 9732082404,
        "Name": "Kali Chaudry",
        "Amount": 100
    },
    {
        "Date": "2020-05-09",
        "Phone": 9521737322,
        "Name": "Riddhi Nair",
        "Amount": 140
    },
    {
        "Date": "2020-05-09",
        "Phone": 9293117791,
        "Name": "Kumara Nayak",
        "Amount": 190
    },
    {
        "Date": "2020-05-09",
        "Phone": 9590146908,
        "Name": "Sachi Loliyekar",
        "Amount": 150
    },
    {
        "Date": "2020-05-09",
        "Phone": 9688156631,
        "Name": "Sahan Oak",
        "Amount": 220
    },
    {
        "Date": "2020-05-09",
        "Phone": 9895408016,
        "Name": "Mukul Krishna",
        "Amount": 230
    },
    {
        "Date": "2020-05-09",
        "Phone": 9261697610,
        "Name": "Niloufer Handa",
        "Amount": 130
    },
    {
        "Date": "2020-05-09",
        "Phone": 9927277067,
        "Name": "Ranjan Khare",
        "Amount": 170
    },
    {
        "Date": "2020-05-09",
        "Phone": 9640338121,
        "Name": "Brahma Swamy",
        "Amount": 230
    },
    {
        "Date": "2020-05-09",
        "Phone": 9485132704,
        "Name": "Sohalia Das",
        "Amount": 250
    },
    {
        "Date": "2020-05-09",
        "Phone": 9330107696,
        "Name": "Nipa Naidu",
        "Amount": 240
    },
    {
        "Date": "2020-05-09",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 180
    },
    {
        "Date": "2020-05-09",
        "Phone": 9389644210,
        "Name": "Brahma Swamy",
        "Amount": 210
    }
]

            // HELPER FUNCTION
            const uniqCustomers = (customers) => {
                    const result = _.uniqBy(customers,'Phone')
                    return result
                }
              
            const ordersTotal = (customers) => {
                let amount = 0
                customers.forEach((ele) => {
                    amount += ele.Amount
                })
                return amount
            }

            // COMPONENTS
            const StatsItems = (props) => {
                const { count, text } = props
                return (
                    <div className="col-md-4">
                        <div className="card bg-light">
                            <div className="card-header">{ count }</div>
                            <div className="card-body">
                                <h5 class="card-title">{ text }</h5>    
                            </div>
                        </div>    
                    </div>
                )
            }

            const StatsContainer = (props) => {
                const { customers } = props
                const ordersCount = customers.length
                
                return(
                    <div className="row mb-4">
                        <StatsItems count={ ordersCount } text="Orders"/>     
                        <StatsItems count={ ordersTotal(customers)} text="Amount"/>     
                        <StatsItems count={ uniqCustomers(customers).length } text="Customers"/>     
                    </div>
                )
            }
            
            const Search = (props) => {
                const { term, handleChange } = props
                return (
                    <input type="text" value={ term } onChange={ handleChange } palceholder="Search using name or phone" className=" form-control"/>
                )
            }

            const CustomerTable = (props) => {
                const { customers,showDetails } = props
                return(
                        <table className="table table-striped">
                        <thead>
                            <tr>
                                <th>Id</th>    
                                <th>Name</th>    
                                <th>Mobile</th>    
                                <th>Show</th>    
                            </tr>    
                        </thead>  
                        <tbody>
                            { customers.map((customer,i) => {
                                return (
                                    <tr key={ customer.Phone }>
                                        <td>{ i+1 }</td>
                                        <td>{ customer.Name }</td>
                                        <td>{ customer.Phone }</td>
                                        <td> <button onClick = { () => { showDetails(customer) } } className="btn btn-primary">show</button> </td>
                                    </tr>
                                )
                            })}   
                        </tbody>  
                    </table>
                )
            } 

            const CustomersConatiner = (props) => {
                const { customers } = props
                const [ term, setTerm ] = useState('')

                const uniq = uniqCustomers(customers)

                const handleChange = (e) => {
                    const data = e.target.value 
                    setTerm(data)
                }

                const showDetails = (customer) => {
                    const customerOrder = customers.filter((c) => { return c.Phone === customer.Phone })
                    const customerOrderTotal = ordersTotal(customerOrder)
                    alert(`
                        Name - ${ customer.Name }
                        Order - ${ customerOrder.length }
                        Amount - ${ customerOrderTotal }
                    `)
                }

                const filterCustomer = () => {
                    const result = uniq.filter((u) => {
                        return u.Name.toLowerCase().includes(term) || u.Phone.toString().includes(term)
                    })
                    return result
                }

                return (
                    <div className="mb-3">
                        <div className="row">
                            <div className="col-md-8">
                                <h1>Listing Customers - { uniq.length }</h1>
                            </div>
                            <div className="col-md-4">
                                <Search term={ term } handleChange={ handleChange }/>
                            </div>    
                        </div>
                        <div className="row">
                            <div class="col-md-12">
                                <CustomerTable customers={ filterCustomer() } showDetails={ showDetails }/>
                            </div>    
                        </div>  
                    </div>
                )
            }

            const OrdersTable = (props) => {
                const { data } = props
                return(
                    <div className="col-md-6">
                        <table className="table">
                            <thead>
                                <tr>
                                    <th>No Of Orders</th>    
                                    <th>Count of Customers</th>    
                                </tr>    
                            </thead>
                            <tbody>
                                {
                                    Object.keys(data).map((d,i) => {
                                        return(
                                            <tr key={ i }>
                                                <td>{ d }</td>
                                                <td> { data[d] }</td>
                                            </tr>
                                        )
                                    })
                                }  
                            </tbody>
                        </table>
                    </div>
                )
            }

            const OrdersChart = (props) => {
                const { data } = props
                google.charts.load('current', {'packages':['corechart']})
                google.charts.setOnLoadCallback(drawChart)
                const chartData = [
                    ['Number Of Orders', 'Customer Count']
                ]
                for(const key in data){
                    chartData.push([key,data[key]])
                }
                function drawChart() {

                    var data = google.visualization.arrayToDataTable(chartData)

                    // Optional; add a title and set the width and height of the chart
                    var options = {'title':'Order Distribution'};

                    // Display the chart inside the <div> element with id="piechart"
                    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                    chart.draw(data, options);
                }
                return(
                    <div id="piechart" style={{ width:'450px', height:'300px'}} className="col-md-6"></div>
                )
            }

            const OrdersContainer = (props) => {
                const { customers } = props

                const customerFrequency = () => {
                    const objFeq = { 1:0, 2:0, 3:0, 4:0, '5+':0}
                    const customerData = uniqCustomers(customers)
                    customerData.forEach((customer) => {
                        const customerOrder = customers.filter((c) => {
                            return c.Phone === customer.Phone
                        })
                        if( customerOrder.length >= 5){
                            objFeq['5+']++
                        }else{
                            objFeq[customerOrder.length]++
                        }
                    })
                    return objFeq
                }
                
                return (
                    <div className="row">
                        <div className="col-md-12">
                            <h1>Orders Contanier</h1>
                        </div>
                        <OrdersTable data={ customerFrequency() }/> 
                        <OrdersChart data={ customerFrequency() }/>   
                    </div>
                )
            }

            function App(props){
                const [ customers, setCustomers ] = useState(customersData)
                return (
                    <div className="container">
                        <h1>Customer Dashboard</h1>    
                        <StatsContainer customers={ customers }/>
                        <CustomersConatiner customers={ customers }/>
                        <OrdersContainer customers={ customers }/>
                    </div>
                )
            }

            ReactDOM.render(<App/>, rootHandle)

        </script>
    </body>
</html>