<!DOCTYPE html>
<html>
    <head>
        <title> Customer Dashboard </title>
    </head>
    <body>
        <div id="root">

        </div>
        
        <script src="js/react.development.js"></script>
        <script src="js/react-dom.development.js"></script>
        <script src="js/babel.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/react-modal/3.14.3/react-modal.min.js"></script>
        <script src="https://www.gstatic.com/charts/loader.js"></script>

        <script type="text/babel">

            const rootHandle = document.getElementById('root')
            const { useState, useEffect } = React 

            const OrdersChart = (props) => {
                const { countingObj } = props
                // const { ordersPerCusomters } = props

                const final_data = Object.entries(countingObj)
                final_data.unshift(['order','customer']) 

                google.charts.load('current', {'packages':['corechart']});
                google.charts.setOnLoadCallback(drawChart);
                    
                // Draw the chart and set the chart values
                function drawChart() {
                    var data= google.visualization.arrayToDataTable(final_data)


                // Display the chart inside the <div> element with id="piechart"
                    var chart = new google.visualization.PieChart(document.getElementById('piechart'));
                    chart.draw(data);
                }

                return (
                    <div id="piechart" style={{width: '700px'}}></div>
                )
            }

            const OrdersTable = props => {
                const { countingObj } = props
                return(
                    <div>
                        <table border="1">
                            <thead>
                                <tr>
                                    <th>No of Orders</th>    
                                    <th>Count Of Customers</th>    
                                </tr>    
                            </thead>
                            <tbody>
                                {
                                    Object.keys(countingObj).map((ele,i) => {
                                        return (
                                            <tr key={ i }>
                                                <td>{ ele }</td>    
                                                <td>{ countingObj[ele] }</td>    
                                            </tr>
                                        )
                                    })
                                }    
                            </tbody>    
                        </table>
                    </div>
                )
            }

            const OrdersContainer = props => {
                const { data, users } = props

                const check = (nameC,phoneC) => {
                    let c = 0
                    data.forEach((ele) => {
                        if( ele.Name === nameC && ele.Phone === phoneC){
                            c++
                        }
                    })
                    return c
                }
                const result = () => {
                    const obj = { '5' : 0 }
                    users.forEach((ele) => {
                        const count = check(ele.Name, ele.Phone)
                        if(count >= 5 ){
                            obj['5'] = obj['5']+1
                            // obj['5'] = 1
                        }
                        else if(!obj.hasOwnProperty(count) && count < 5){
                            obj[count] = 1
                        }
                        else if( count < 5 ){
                            obj[count] = obj[count] + 1
                        }
                    })
                    return obj
                }
                const countingObj = result()
                return (
                    <div style={ { display:'inline-flex', justifyContent:'space-space-around' } }>
                        <OrdersTable countingObj={ countingObj } />
                        <OrdersChart countingObj={ countingObj }/>
                    </div>
                )
            }

            const StatItems = props => {
                const { name, data } = props
                return (
                    <div style={ { width:'100px', height:'150px',border:'1px solid red',padding:'30px',textAlign:'center',margin:'12px',backgroundColor:'green' } }>
                        <h1>{ data }</h1>
                        <h2>{ name }</h2>    
                    </div>
                )
            }

            const StatsContainer = props => {
                const { data, users, amount } = props
                return(
                    <div style={{ display:'inline-flex',border:'5px solid black',justifyContent:'center'}}>
                        <StatItems name="Orders" data={ data.length }/>
                        <StatItems name="Amounts" data={ amount }/>
                        <StatItems name="Customers" data={ users.length }/>
                    </div>
                )
            }

            const SearchBox = props => {
                const [ input, setInput ] = useState('')

                const { filterSearch } = props

                const handleInput = (e) => {
                    setInput(e.target.value)
                }

                const handleKeyUp = (e) => {
                    filterSearch(e.target.value)
                }
                return (
                    <div>
                        <input type="text" value={ input } onChange={ handleInput } onKeyUp={ handleKeyUp }/>    
                    </div>
                )
            }

            const CustomersContainer = props => {
                const [ modalIsOpen, setIsOpen ] = useState(false)
                const [ totalOrders, setTotalOrders ] = useState([])
                const [ totalAmount, setTotalAmount ] = useState('')
                const [ nameId, setNameId ] = useState('')

                const { nonRepate,filterSearch,data } = props

                const handleDetails = (ele,i) => {
                    setIsOpen(true)
                    const name = `user ${ i } - ${ ele.Phone }`
                    setNameId(name)
                    const countOrder = data.filter((d) => {  
                        return d.Name === ele.Name && d.Phone === ele.Phone
                    })
                    setTotalOrders(countOrder)

                    let amount = 0
                    countOrder.forEach((ele) => {
                        amount += ele.Amount
                    })
                    setTotalAmount(amount)
                }

                const closeModal = () => {
                    setIsOpen(false)
                }
                return (
                    <div style={ { display:'inline-flex', justifyContent:'space-space-around' } }>
                        
                        <table border="1">
                            
                            <thead>
                                <tr>
                                    <th>Id</th>    
                                    <th>Name</th>    
                                    <th>Mobile</th>    
                                    <th>Details</th>    
                                </tr>
                            </thead>
                            <tbody>
                                {
                                    nonRepate.map((ele,i) => {
                                        return(
                                            <tr key={ i }>
                                                <td>{ i+1 }</td>    
                                                <td>{ ele.Name }</td>    
                                                <td>{ ele.Phone }</td>    
                                                <td> <a href="#" onClick={ () => {handleDetails(ele,i+1) }  }>Details</a> </td>    
                                            </tr>
                                        )
                                    })
                                }    
                            </tbody>   
                        </table>
                        <SearchBox nonRepate={ nonRepate } filterSearch={ filterSearch }/>
                        <ReactModal isOpen={modalIsOpen}>
                            <h1>{ nameId }</h1>
                            <h1>Total Amount - { totalAmount }</h1>
                            <h1>Order Count - { totalOrders.length }</h1>

                            <table border="1">
                                <thead>
                                    <tr>
                                        <th>#</th>    
                                        <th>Date</th>    
                                        <th>Amount</th>    
                                    </tr>    
                                </thead>  
                                <tbody>
                                      {
                                        totalOrders.map((ele,i) => {
                                            return (
                                                <tr key={ i }>
                                                    <td>{ i+1 }</td>    
                                                    <td>{ ele.Date }</td>    
                                                    <td>{ ele.Amount }</td>    
                                                </tr>
                                            )
                                        })
                                      }  
                                </tbody>  
                            </table>

                            <button onClick={ closeModal }>Close</button>
                        </ReactModal>
                    </div>
                )
            }

            ReactModal.setAppElement('#root')
            function App(props){
                const [users, setUsers ] = useState([])
                const [ nonRepate, setNonRepate ] = useState([])
                const [ totalAmount, setTotalAmount ] = useState('')
                const data = [
                        {
                            "Date": "2020-04-29",
                            "Phone": 9455622241,
                            "Name": "Shankara Narasimhan",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9597628723,
                            "Name": "Sulya Gupta",
                            "Amount": 90
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 80
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9383568793,
                            "Name": "Vaibhav Mulye",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9455622241,
                            "Name": "Shankara Narasimhan",
                            "Amount": 230
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9521737322,
                            "Name": "Riddhi Nair",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 80
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9603660688,
                            "Name": "Dhenuka Dhawan",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9451926724,
                            "Name": "Sahan Sibal",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9699939066,
                            "Name": "Haripriya Nayak",
                            "Amount": 270
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9590146908,
                            "Name": "Sachi Loliyekar",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-04-29",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9969345730,
                            "Name": "Kavi Edwin",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 280
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9971276037,
                            "Name": "Pramlocha Comar",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9241664018,
                            "Name": "Utathya Ghate",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9248936762,
                            "Name": "Arpana Raja",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9895408016,
                            "Name": "Mukul Krishna",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9241664018,
                            "Name": "Utathya Ghate",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9920950009,
                            "Name": "Rohan Sarma",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9820224845,
                            "Name": "Tanika Philip",
                            "Amount": 90
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9383568793,
                            "Name": "Vaibhav Mulye",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9732082404,
                            "Name": "Kali Chaudry",
                            "Amount": 290
                        },
                        {
                            "Date": "2020-04-30",
                            "Phone": 9534474777,
                            "Name": "Daeva Tata",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 160
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9572464275,
                            "Name": "Salmalin Mehta",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9688156631,
                            "Name": "Sahan Oak",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9979209995,
                            "Name": "Atman Mathur",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9521737322,
                            "Name": "Riddhi Nair",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9265205814,
                            "Name": "Daeva Peri",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9267357082,
                            "Name": "Muni Wasgare",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9267357082,
                            "Name": "Muni Wasgare",
                            "Amount": 290
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9590146908,
                            "Name": "Sachi Loliyekar",
                            "Amount": 190
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 290
                        },
                        {
                            "Date": "2020-05-01",
                            "Phone": 9241664018,
                            "Name": "Utathya Ghate",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9971276037,
                            "Name": "Pramlocha Comar",
                            "Amount": 80
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9920950009,
                            "Name": "Rohan Sarma",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9705384480,
                            "Name": "Latif Chia",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9252350612,
                            "Name": "Anushka Mody",
                            "Amount": 150
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9688156631,
                            "Name": "Sahan Oak",
                            "Amount": 290
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9359394987,
                            "Name": "Tarun Mapkar",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9747425720,
                            "Name": "Markandeya Barad",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9699939066,
                            "Name": "Haripriya Nayak",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9590146908,
                            "Name": "Sachi Loliyekar",
                            "Amount": 220
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9820224845,
                            "Name": "Tanika Philip",
                            "Amount": 220
                        },
                        {
                            "Date": "2020-05-02",
                            "Phone": 9747425720,
                            "Name": "Markandeya Barad",
                            "Amount": 90
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9910042819,
                            "Name": "Shanti Bajwa",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9518195948,
                            "Name": "Indra Chaudry",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 80
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9453085874,
                            "Name": "Manu Oza",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9976945538,
                            "Name": "Amitabha Kothari",
                            "Amount": 270
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9910042819,
                            "Name": "Shanti Bajwa",
                            "Amount": 280
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9405883814,
                            "Name": "Gauri Som",
                            "Amount": 220
                        },
                        {
                            "Date": "2020-05-03",
                            "Phone": 9252350612,
                            "Name": "Anushka Mody",
                            "Amount": 170
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9453085874,
                            "Name": "Manu Oza",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 150
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9927277067,
                            "Name": "Ranjan Khare",
                            "Amount": 80
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9910042819,
                            "Name": "Shanti Bajwa",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9293117791,
                            "Name": "Kumara Nayak",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9976945538,
                            "Name": "Amitabha Kothari",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9518195948,
                            "Name": "Indra Chaudry",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9518195948,
                            "Name": "Indra Chaudry",
                            "Amount": 130
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9521737322,
                            "Name": "Riddhi Nair",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9920950009,
                            "Name": "Rohan Sarma",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9597628723,
                            "Name": "Sulya Gupta",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9534474777,
                            "Name": "Daeva Tata",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9009381182,
                            "Name": "Mira Reddy",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9009381182,
                            "Name": "Mira Reddy",
                            "Amount": 160
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 150
                        },
                        {
                            "Date": "2020-05-04",
                            "Phone": 9265205814,
                            "Name": "Daeva Peri",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9451926724,
                            "Name": "Sahan Sibal",
                            "Amount": 170
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9504662177,
                            "Name": "Tara Menon",
                            "Amount": 230
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9455622241,
                            "Name": "Shankara Narasimhan",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9927277067,
                            "Name": "Ranjan Khare",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9521737322,
                            "Name": "Riddhi Nair",
                            "Amount": 90
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9252350612,
                            "Name": "Anushka Mody",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9699939066,
                            "Name": "Haripriya Nayak",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9150159527,
                            "Name": "Leya Sankaran",
                            "Amount": 270
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9733555024,
                            "Name": "Nirav Khalsa",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-05",
                            "Phone": 9241664018,
                            "Name": "Utathya Ghate",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9455622241,
                            "Name": "Shankara Narasimhan",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9705384480,
                            "Name": "Latif Chia",
                            "Amount": 160
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9359394987,
                            "Name": "Tarun Mapkar",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9688156631,
                            "Name": "Sahan Oak",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9688156631,
                            "Name": "Sahan Oak",
                            "Amount": 280
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9699939066,
                            "Name": "Haripriya Nayak",
                            "Amount": 130
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 90
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9597628723,
                            "Name": "Sulya Gupta",
                            "Amount": 190
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9521737322,
                            "Name": "Riddhi Nair",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9451926724,
                            "Name": "Sahan Sibal",
                            "Amount": 230
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9403313898,
                            "Name": "Adri Dave",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9895408016,
                            "Name": "Mukul Krishna",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-05-06",
                            "Phone": 9504662177,
                            "Name": "Tara Menon",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9699939066,
                            "Name": "Haripriya Nayak",
                            "Amount": 280
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9732082404,
                            "Name": "Kali Chaudry",
                            "Amount": 130
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9150159527,
                            "Name": "Leya Sankaran",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9820224845,
                            "Name": "Tanika Philip",
                            "Amount": 290
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9248936762,
                            "Name": "Arpana Raja",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9293117791,
                            "Name": "Kumara Nayak",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9732082404,
                            "Name": "Kali Chaudry",
                            "Amount": 280
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9265205814,
                            "Name": "Daeva Peri",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9534474777,
                            "Name": "Daeva Tata",
                            "Amount": 160
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9252350612,
                            "Name": "Anushka Mody",
                            "Amount": 80
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 220
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9153022424,
                            "Name": "Hastin Mangal",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9920950009,
                            "Name": "Rohan Sarma",
                            "Amount": 160
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9534474777,
                            "Name": "Daeva Tata",
                            "Amount": 230
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9359394987,
                            "Name": "Tarun Mapkar",
                            "Amount": 260
                        },
                        {
                            "Date": "2020-05-07",
                            "Phone": 9969345730,
                            "Name": "Kavi Edwin",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 130
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 120
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9504662177,
                            "Name": "Tara Menon",
                            "Amount": 220
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9455622241,
                            "Name": "Shankara Narasimhan",
                            "Amount": 150
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 90
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9330107696,
                            "Name": "Nipa Naidu",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9927277067,
                            "Name": "Ranjan Khare",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9140356318,
                            "Name": "Ballari Upadhyay",
                            "Amount": 270
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 70
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9518195948,
                            "Name": "Indra Chaudry",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9976945538,
                            "Name": "Amitabha Kothari",
                            "Amount": 270
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9534474777,
                            "Name": "Daeva Tata",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9504662177,
                            "Name": "Tara Menon",
                            "Amount": 210
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9293117791,
                            "Name": "Kumara Nayak",
                            "Amount": 200
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9293117791,
                            "Name": "Kumara Nayak",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9248936762,
                            "Name": "Arpana Raja",
                            "Amount": 110
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9960294002,
                            "Name": "Mitra Gounder",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9150159527,
                            "Name": "Leya Sankaran",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-08",
                            "Phone": 9236367267,
                            "Name": "Takshaka Sandal",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9732082404,
                            "Name": "Kali Chaudry",
                            "Amount": 100
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9521737322,
                            "Name": "Riddhi Nair",
                            "Amount": 140
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9293117791,
                            "Name": "Kumara Nayak",
                            "Amount": 190
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9590146908,
                            "Name": "Sachi Loliyekar",
                            "Amount": 150
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9688156631,
                            "Name": "Sahan Oak",
                            "Amount": 220
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9895408016,
                            "Name": "Mukul Krishna",
                            "Amount": 230
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9261697610,
                            "Name": "Niloufer Handa",
                            "Amount": 130
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9927277067,
                            "Name": "Ranjan Khare",
                            "Amount": 170
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9640338121,
                            "Name": "Brahma Swamy",
                            "Amount": 230
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9485132704,
                            "Name": "Sohalia Das",
                            "Amount": 250
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9330107696,
                            "Name": "Nipa Naidu",
                            "Amount": 240
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 180
                        },
                        {
                            "Date": "2020-05-09",
                            "Phone": 9389644210,
                            "Name": "Brahma Swamy",
                            "Amount": 210
                        }
                ]
                        
                useEffect(() => {
                    let amount = 0
                    data.forEach((ele) => {
                        amount += ele.Amount
                    })
                    setTotalAmount(amount)
                    // non repate
                    const result = []
                    function check(obj){
                        for( let ele in result)
                        {
                            if(result[ele].Name === obj.Name && result[ele].Phone === obj.Phone){
                                return true
                            }
                        }
                        return false
                    }
                    data.forEach((ele) => {
                        if(check(ele) === false){
                            result.push(ele)
                        }
                    })
                    setNonRepate(result)
                    setUsers(result)

                },[])
                
                const filterSearch = (name) => {
                    console.log(name)
                    if(name){
                        const result = users.filter((ele) => {
                            return ele.Name.toLowerCase().includes(name.toLowerCase()) || ele.Phone.toString().includes(name)
                            // return ele.Phone.includes(Number(name))
                        })
                        setNonRepate(result) 
                    }else{
                        setNonRepate(users)
                    }    
                }

                return(
                    <div>
                        <h1>Customer Dashboard</h1>
                        <hr/>
                        <table style={{ width:'100%'}}>
                            <tbody>
                                <tr>
                                    <StatsContainer 
                                        amount={ totalAmount } 
                                        data = { data } 
                                        users={ users } 
                                    />
                                </tr> 
                                <tr>
                                    { 
                                        nonRepate.length > 0 && 
                                        <CustomersContainer   
                                            nonRepate={ nonRepate } 
                                            filterSearch={ filterSearch } 
                                            data={ data } 
                                        />       
                                    }
                                </tr>  
                                <tr>
                                    <OrdersContainer 
                                        data={data} 
                                        users={ users }
                                    />
                                </tr> 
                            </tbody>    
                        </table> 
                    </div>
                )

            }

            ReactDOM.render(<App/>, rootHandle)
        </script>
    </body>
</html>